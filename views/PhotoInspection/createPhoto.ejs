<html>

<head>
  <link rel="stylesheet" href="./photo.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/Dashboard/assets/bootstrap/css/bootstrap.min.css" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&amp;display=swap" />
  <link rel="stylesheet" href="/Dashboard/assets/fonts/fontawesome-all.min.css" />
  <link rel="stylesheet" href="/Dashboard/assets/fonts/font-awesome.min.css" />
  <link rel="stylesheet" href="/Dashboard/assets/fonts/fontawesome5-overrides.min.css" />
  <link rel="stylesheet" href="/Dashboard/assets/css/Pretty-Registration-Form-.css" />
  <link rel="stylesheet" href="/Dashboard/assets/css/untitled.css" />
</head>
<style>
  @charset "UTF-8";

  html * {
    box-sizing: border-box;
  }

  p {
    margin: 0;
  }

  .upload__box {
    padding: 40px;
  }

  .upload__inputfile {
    width: 0.1px;
    height: 0.1px;
    opacity: 0;
    overflow: hidden;
    position: absolute;
    z-index: -1;
  }

  .upload__btn {
    display: inline-block;
    font-weight: 600;
    color: #fff;
    text-align: center;
    min-width: 116px;
    padding: 5px;
    transition: all 0.3s ease;
    cursor: pointer;
    border: 2px solid;
    background-color: #4045ba;
    border-color: #4045ba;
    border-radius: 10px;
    line-height: 26px;
    font-size: 14px;
  }

  .upload__btn:hover {
    background-color: unset;
    color: #4045ba;
    transition: all 0.3s ease;
  }

  .upload__btn-box {
    margin-bottom: 10px;
    display: flex;
    align-content: center;
    align-items: center;
    justify-content: center;
  }

  .upload__img-wrap {
    display: flex;
    flex-wrap: wrap;
    margin: 0 -10px;
  }

  .upload__img-box {
    width: 200px;
    padding: 0 10px;
    margin-bottom: 12px;
  }

  .upload__img-close {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background-color: rgba(0, 0, 0, 0.5);
    position: absolute;
    top: 10px;
    right: 10px;
    text-align: center;
    line-height: 24px;
    z-index: 1;
    cursor: pointer;
  }

  .upload__img-close:after {
    content: "âœ–";
    font-size: 14px;
    color: white;
  }

  .img-bg {
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
    position: relative;
    padding-bottom: 100%;
  }

  .container {
    background-color: rgb(233, 233, 233);
    margin-top: 30px;
    border-radius: 10px;
  }

  .centerify {
    display: flex;
    align-items: center;
    justify-content: center;
    align-content: center;
    flex-direction: column;
    padding: 10px;
  }

  .row {
    margin: 5px;
    display: flex;
    justify-content: center;
  }

  .outerContainer {
    box-shadow: 20px 20px 50px 15px grey;
    max-width: fit-content !important;
  }
</style>

<body>
  <div
      id="wrapper"
      style="--bs-primary: #858c9f; --bs-primary-rgb: 133, 140, 159"
    >
    
      <nav
        class="navbar navbar-dark align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0"
        style="
          --bs-primary: #31363b;
          --bs-primary-rgb: 49, 54, 59;
          background: #858c9f;
        "
      >
        <div class="container-fluid d-flex flex-column p-0">
          <a
            class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0"
            href="#"
          >
            <div class="sidebar-brand-icon rotate-n-15"></div>
            <div class="sidebar-brand-text mx-3"><span>SOLAR EPC</span></div>
          </a>
          <hr class="sidebar-divider my-0" />
          <ul class="navbar-nav text-light" id="accordionSidebar">
            <li class="nav-item">
              <a class="nav-link" href="/dashboard"
                ><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/project"
                ><i class="fas fa-list"></i><span>Projects</span></a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/task"
                ><i class="fa fa-tasks"></i><span>Tasks</span></a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/salesperson"
                ><i class="fas fa-user"></i><span>Sales</span></a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/support"
                ><i class="fab fa-wpforms"></i><span>Support</span></a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/api/photoUpload/dashboard"
                ><i class="fas fa-photo-video"></i><span>Photo Upload</span></a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/contractHome"
                ><i class="fas fa-file-contract"></i><span>Contracts</span></a
              >
            </li>
          </ul>
          <div class="text-center d-none d-md-inline">
            <button
              class="btn rounded-circle border-0"
              id="sidebarToggle"
              type="button"
            ></button>
          </div>
        </div>
      </nav>
 
  <div class="container outerContainer">
    
    <form action="/api/photoUpload" method="post" enctype="multipart/form-data" class="row g-3 custom-form">

      <div class="container centerify">
        <h3 style="border-bottom-color: #85869c">
          Upload Photos
        </h3>
        <div class="row">
          <div class="col-sm-6">
            <label for="customerId" class="centerify">Customer ID</label>
          </div>
          <div class="col-sm-6">
            <input type="text" class="form-label" id="customerId" name="customerId" />
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <label for="email centerify" class="centerify">Email</label>
          </div>
          <div class="col-sm-6">
            <input type="email" class="form-label" id="email" name="email" />
          </div>
        </div>
        <div class="row" style="
              background-color: rgb(168, 168, 168);
              border-radius: 15px;
              padding: 10px;
            ">
          <div class="col-sm-6">
            <label for="operation" class="centerify">Operation</label>
          </div>
          <div class="col-sm-6">
            <select name="operation" class="form-select" id="operation">
              <option value="inspection">Inspection</option>
              <option value="support">Support</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <label for="content" class="centerify">Comment</label>
          </div>
          <div class="col-sm-6">
            <textarea name="comment" class="form-label" id="content" rows="5"></textarea>
          </div>
        </div>
      </div>
      <div class="upload__box">
        <div class="upload__btn-box">
          <label class="upload__btn">
            <p>Upload images</p>
            <input type="file" multiple="" data-max_length="20" class="upload__inputfile" name="imageFile" />
          </label>
        </div>
        <div class="upload__img-wrap"></div>
      </div>

      <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-8 centerify">
          <input class="btn btn-primary" type="submit" value="Submit" />
        </div>
        <div class="col-sm-2"></div>
      </div>
    </form>
  </div>
  </div>

  <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <script>
    jQuery(document).ready(function () {
      ImgUpload();
    });

    function ImgUpload() {
      var imgWrap = "";
      var imgArray = [];

      $(".upload__inputfile").each(function () {
        $(this).on("change", function (e) {
          imgWrap = $(this).closest(".upload__box").find(".upload__img-wrap");
          var maxLength = $(this).attr("data-max_length");

          var files = e.target.files;
          var filesArr = Array.prototype.slice.call(files);
          var iterator = 0;
          filesArr.forEach(function (f, index) {
            if (!f.type.match("image.*")) {
              return;
            }

            if (imgArray.length > maxLength) {
              return false;
            } else {
              var len = 0;
              for (var i = 0; i < imgArray.length; i++) {
                if (imgArray[i] !== undefined) {
                  len++;
                }
              }
              if (len > maxLength) {
                return false;
              } else {
                imgArray.push(f);

                var reader = new FileReader();
                reader.onload = function (e) {
                  var html =
                    "<div class='upload__img-box'><div style='background-image: url(" +
                    e.target.result +
                    ")' data-number='" +
                    $(".upload__img-close").length +
                    "' data-file='" +
                    f.name +
                    "' class='img-bg'><div class='upload__img-close'></div></div></div>";
                  imgWrap.append(html);
                  iterator++;
                };
                reader.readAsDataURL(f);
              }
            }
          });
        });
      });

      $("body").on("click", ".upload__img-close", function (e) {
        var file = $(this).parent().data("file");
        for (var i = 0; i < imgArray.length; i++) {
          if (imgArray[i].name === file) {
            imgArray.splice(i, 1);
            break;
          }
        }
        $(this).parent().parent().remove();
      });
    }
  </script>
  <script>
    const setUserName = () => {
      let user = JSON.parse(localStorage.getItem('user'));
      document.getElementById("userName").innerText = user.userName;
    };
    setUserName();
  </script>
</body>

</html>